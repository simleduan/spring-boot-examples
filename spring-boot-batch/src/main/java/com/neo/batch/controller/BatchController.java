package com.neo.batch.controller;import com.neo.batch.builder.AbstractJob;import com.neo.batch.compent.JobHome;import com.neo.batch.entity.JobRequest;import org.springframework.batch.core.Job;import org.springframework.batch.core.JobExecution;import org.springframework.batch.core.JobParameters;import org.springframework.batch.core.JobParametersInvalidException;import org.springframework.batch.core.launch.JobLauncher;import org.springframework.batch.core.repository.JobExecutionAlreadyRunningException;import org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException;import org.springframework.batch.core.repository.JobRestartException;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;/** * Created by cainiao on 2020-10-18 19:46 */@RestControllerpublic class BatchController {    @Autowired    private JobLauncher jobLauncher;    @Autowired    private JobHome jobHome;    @RequestMapping("startJob")    public void startJob(JobRequest jobRequest){        Job job = jobHome.getJob(jobRequest.getJobName()).getJob();        JobParameters jobParameters = jobHome.getJob(jobRequest.getJobName()).getJobParameters();        try {            jobLauncher.run(job,jobParameters);        } catch (Exception e) {            System.out.println("发生异常"+e.getMessage());        }    }}