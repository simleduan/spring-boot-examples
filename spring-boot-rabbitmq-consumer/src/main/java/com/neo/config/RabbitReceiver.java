package com.neo.config;import com.rabbitmq.client.Channel;import org.springframework.amqp.rabbit.annotation.*;import org.springframework.amqp.support.AmqpHeaders;import org.springframework.messaging.Message;import org.springframework.messaging.MessageHeaders;import org.springframework.stereotype.Component;/** * Created by cainiao on 2021/3/7 11:26 上午 */@Componentpublic class RabbitReceiver {    @RabbitListener(bindings = @QueueBinding(            value = @Queue(value = "queue-1",                    durable="true"),            exchange = @Exchange(value = "exchange-1",                    durable="true",                    type= "topic",                    ignoreDeclarationExceptions = "true"),            key = "springboot.*"    )    )    @RabbitHandler    public void onMessage(Message message, Channel channel) throws Exception {        System.err.println("--------------------------------------");        MessageHeaders headers = message.getHeaders();        String send_time = (String) headers.get("send_time");        System.err.println("消费端Payload: " + message.getPayload()+"发送时间为："+send_time);        Long deliveryTag = (Long)message.getHeaders().get(AmqpHeaders.DELIVERY_TAG);        //手工ACK        channel.basicAck(deliveryTag, false);    }}